<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Entra√Ænement Vocabulaire Cr√©aFrench</title>
    <style>
        :root { --primary: #3498db; --success: #2ecc71; --danger: #e74c3c; --bg: #121212; --card: #1e1e1e; --accent: #f1c40f; }
        body { background-color: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; }
        #container { width: 95%; max-width: 1100px; margin: 40px auto; text-align: center; }
        
        .selector-container { background: var(--card); padding: 25px; border-radius: 12px; margin-bottom: 30px; border: 1px solid #333; }
        select { padding: 12px; background: #333; color: white; border-radius: 6px; border: 1px solid var(--primary); font-size: 16px; width: 300px; cursor: pointer; }

        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .set-card { background: var(--card); padding: 20px; border-radius: 12px; border: 1px solid #333; transition: 0.3s; }
        .set-card:hover { border-color: var(--primary); transform: translateY(-3px); }
        
        .btn { background: var(--primary); color: white; border: none; padding: 12px; border-radius: 6px; cursor: pointer; font-size: 15px; width: 100%; margin-top: 10px; transition: 0.3s; font-weight: bold; }
        .btn-secondary { background: #555; }
        .btn:hover { filter: brightness(1.2); }

        .screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 100; justify-content: center; align-items: center; flex-direction: column; }
        
        #word-display { font-size: 60px; font-weight: bold; margin: 40px 0; color: var(--accent); text-shadow: 2px 2px 10px rgba(0,0,0,0.5); padding: 0 20px; text-align: center; max-width: 90%; word-wrap: break-word;}
        #timer-container { width: 70%; height: 12px; background: #333; border-radius: 6px; margin: 20px auto; overflow: hidden; }
        #timer-bar { width: 100%; height: 100%; background: var(--success); transition: width 1s linear; }

        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 10px; border: 1px solid #444; text-align: left; }
        th { background: #333; color: var(--primary); }
        .scroll-area { width: 90%; max-height: 75vh; overflow-y: auto; background: #1e1e1e; padding: 20px; border-radius: 10px; }
        
        #res-body tr td { font-size: 30px; padding: 15px; line-height: 1.4; } 
        #result table th { font-size: 24px; }

        input[type="text"] { background: #333; color: white; border: 1px solid #555; padding: 8px; width: 90%; border-radius: 4px; }
        .sync-box { margin-top: 30px; padding: 15px; background: #222; border-radius: 8px; font-size: 0.9rem; border: 1px dashed #444;}
    </style>
</head>
<body>

<div id="container">
    <h1>Entra√Ænement Vocabulaire Cr√©aFrench</h1>
    <p style="color: #888;">Sets de 14 mots (ordre fixe).</p>
    
    <div class="selector-container">
        <label style="margin-right: 15px;">Choisir le Th√®me :</label>
        <select id="theme-select" onchange="genererSeries(this.value)">
            <option value="">-- Faites votre choix --</option>
            <option value="10">Th√®me 10 : L'√âcologie</option>
            <option value="11">Th√®me 11 : La Politique & Le Pays</option>
            <option value="12">Th√®me 12 : Les √âtudes & M√©tiers</option>
        </select>
    </div>

    <div class="grid" id="set-grid"></div>

    <div class="sync-box">
        <p>üîÑ <b>Synchroniser :</b></p>
        <div style="display: flex; gap: 10px; justify-content: center;">
            <button class="btn btn-secondary" style="width: 200px;" onclick="exporterData()">Copier ma lijst (Exporter)</button>
            <button class="btn btn-secondary" style="width: 200px;" onclick="importerData()">Coller een lijst (Importer)</button>
        </div>
    </div>
</div>

<div id="edit-screen" class="screen">
    <h2 id="edit-title">Modifier la S√©rie</h2>
    <div class="scroll-area">
        <table id="edit-table">
            <thead>
                <tr><th>N√©erlandais</th><th>Fran√ßais</th><th>Action</th></tr>
            </thead>
            <tbody id="edit-body"></tbody>
        </table>
        <button class="btn btn-secondary" onclick="ajouterLigne()">+ Ajouter un mot</button>
    </div>
    <div style="display:flex; gap:15px; width: 90%; max-width: 500px; margin-top: 20px;">
        <button class="btn" onclick="sauvegarderEtDemarrer()">üöÄ Enregistrer et Commencer</button>
        <button class="btn btn-secondary" onclick="fermerEdition()">Annuler</button>
    </div>
</div>

<div id="exercise" class="screen">
    <div id="info-header" style="font-size: 1.2rem; color: #aaa;"></div>
    <div id="timer-container"><div id="timer-bar"></div></div>
    <div id="word-display">Chargement...</div>
    
    <div id="exercise-buttons" style="display:flex; gap:15px;">
        <button class="btn" style="width:140px; background:#555;" id="pause-btn" onclick="basculerPause()">Pause</button>
        <button class="btn" style="width:140px; background:var(--danger);" onclick="location.reload()">Arr√™ter</button>
    </div>
</div>

<div id="result" class="screen">
    <h2 style="color: var(--success);">Solutions</h2>
    <div class="scroll-area">
        <table>
            <thead><tr><th>N√©erlandais</th><th>Fran√ßais</th></tr></thead>
            <tbody id="res-body"></tbody>
        </table>
    </div>
    <button class="btn" style="margin-top: 20px; width:250px;" onclick="location.reload()">Retour au menu</button>
</div>

<script>
const listeVocabulaire = [
    // --- L'√âCOLOGIE (10) ---
    {t:10, nl:"de bescherming van het milieu", fr:"la protection de l'environnement"}, {t:10, nl:"het behoud van het milieu", fr:"la sauvegarde de l'environnement"}, {t:10, nl:"de planeet beschermen", fr:"prot√©ger la plan√®te"}, {t:10, nl:"het klimaat redden", fr:"sauver le climat"}, {t:10, nl:"het respect voor de nature", fr:"le respect de la nature"}, {t:10, nl:"de biodiversiteit beschermen", fr:"sauvegarder la biodiversit√©"}, {t:10, nl:"de ecosystemen beschermen", fr:"pr√©server les √©cosyst√®mes"}, {t:10, nl:"de groenen (politiek)", fr:"les √©cologistes / les √©colos"}, {t:10, nl:"de duurzame ontwikkeling", fr:"le d√©veloppement durable"}, {t:10, nl:"de groene economie", fr:"l'√©conomie verte"}, {t:10, nl:"een uitdaging voor het milieu", fr:"un d√©fi environnemental"}, {t:10, nl:"het recycleren", fr:"le recyclage / recycler"}, {t:10, nl:"het hergebruik", fr:"la r√©cup√©ration / r√©cup√©rer"}, {t:10, nl:"het afval sorteren", fr:"trier les d√©chets"}, {t:10, nl:"het sorteren", fr:"le tri s√©lectief"}, {t:10, nl:"zero waste", fr:"le z√©ro d√©chet"}, {t:10, nl:"de overbodige verpakkingen", fr:"les emballages superflus"}, {t:10, nl:"wegwerpplastic", fr:"le plastique √† usage unique"}, {t:10, nl:"biologisch afbreekbaar", fr:"biod√©gradable"}, {t:10, nl:"de klimaatverandering", fr:"le changement climatique"}, {t:10, nl:"de ecologische ramp", fr:"le d√©sastre √©cologique"}, {t:10, nl:"vervuilen", fr:"polluer"}, {t:10, nl:"de vervuilende producten", fr:"les produits polluants"}, {t:10, nl:"de ontbossing", fr:"la d√©forestation"}, {t:10, nl:"giftig", fr:"toxique / nocif"}, {t:10, nl:"de opwarming van de aarde", fr:"le r√©chauffement climatique"}, {t:10, nl:"het smelten van de ijskappen", fr:"la fonte des glaciers"}, {t:10, nl:"de droogte", fr:"la s√©cheresse"}, {t:10, nl:"de hittegolf", fr:"la canicule"}, {t:10, nl:"de luchtvervuiling", fr:"la pollution atmosph√©rique"}, {t:10, nl:"het fijn stof", fr:"les particules fines"}, {t:10, nl:"de CO2 uitstoot", fr:"les √©missions de CO2"}, {t:10, nl:"de hernieuwbare energie", fr:"l'√©nergie renouvelable"}, {t:10, nl:"de zonnepanelen", fr:"les panneaux solaires"}, {t:10, nl:"de windturbine", fr:"l'eolienne"}, {t:10, nl:"carpoolen", fr:"faire du covoiturage"},
    // --- LA POLITIQUE (11) ---
    {t:11, nl:"een burger", fr:"un citoyen / une citoyenne"}, {t:11, nl:"rechten en plichten", fr:"avoir des droits et des devoirs"}, {t:11, nl:"het volk", fr:"le peuple"}, {t:11, nl:"de bevolking", fr:"la population"}, {t:11, nl:"de inwoners", fr:"les habitants"}, {t:11, nl:"vaderlandsliefde", fr:"le patriotisme"}, {t:11, nl:"scheiding Kerk en Staat", fr:"la s√©paration des √âglises et de l'√âtat"}, {t:11, nl:"het stemrecht", fr:"le droit de vote"}, {t:11, nl:"de verkiezingen", fr:"les √©lections"}, {t:11, nl:"stemmen op", fr:"voter pour"}, {t:11, nl:"een politieke partij", fr:"un parti politique"}, {t:11, nl:"de democratie", fr:"la d√©mocratie"}, {t:11, nl:"de grondwet", fr:"la constitution"}, {t:11, nl:"het parlement", fr:"le parlement"}, {t:11, nl:"de regering", fr:"le gouvernement"}, {t:11, nl:"de eerste minister", fr:"le Premier ministre"}, {t:11, nl:"de staatstructuur", fr:"la structure de l'√âtat"}, {t:11, nl:"de taalgrens", fr:"la fronti√®re linguistique"},
    // --- √âTUDES & M√âTIERS (12) ---
    {t:12, nl:"de kleuterschool", fr:"l'√©cole maternelle"}, {t:12, nl:"de lagere school", fr:"l'√©cole primaire"}, {t:12, nl:"de middelbare school", fr:"l'√©cole secondaire"}, {t:12, nl:"de leraar", fr:"un professeur / prof"}, {t:12, nl:"de hogeschool", fr:"la haute √©cole"}, {t:12, nl:"de universiteit", fr:"l'universit√©"}, {t:12, nl:"de student", fr:"un √©tudiant"}, {t:12, nl:"de campus", fr:"le campus"}, {t:12, nl:"het lessenrooster", fr:"l'horaire / l'emploi du temps"}, {t:12, nl:"examens afleggen", fr:"passer des examens"}, {t:12, nl:"geslaagd zijn", fr:"r√©ussir"}, {t:12, nl:"gebuisd zijn", fr:"√©chouer / rater"}, {t:12, nl:"het diploma", fr:"le dipl√¥me"}, {t:12, nl:"de wiskunde", fr:"les maths"}, {t:12, nl:"de dokter", fr:"le m√©decin"}, {t:12, nl:"de verpleger", fr:"l'infirmier"}, {t:12, nl:"de advocaat", fr:"l'avocat"}, {t:12, nl:"de ingenieur", fr:"l'ing√©nieur"}
];

let toutesLesSeries = [];
let indexSerieActuelle = 0, indexMotActuel = 0, tempsRestant = 8, estEnPause = false, intervalle;

// VASTE SHUFFLE FUNCTIE
function seededShuffle(array, seed) {
    let m = array.length, t, i;
    const random = () => {
        var x = Math.sin(seed++) * 10000;
        return x - Math.floor(x);
    };
    while (m) {
        i = Math.floor(random() * m--);
        t = array[m];
        array[m] = array[i];
        array[i] = t;
    }
    return array;
}

function genererSeries(numTheme) {
    const grille = document.getElementById('set-grid');
    grille.innerHTML = '';
    if (!numTheme) return;

    const storageKey = 'creafrench_thema_' + numTheme;
    const dataSauvegardee = localStorage.getItem(storageKey);

    if (dataSauvegardee) {
        toutesLesSeries = JSON.parse(dataSauvegardee);
    } else {
        // Shuffle de hele lijst √©√©n keer op basis van een vaste seed (bijv. 12345)
        let vocab = seededShuffle([...listeVocabulaire.filter(m => m.t == numTheme)], 12345);
        if(vocab.length === 0) return;

        toutesLesSeries = [];
        for (let i = 0; i < 10; i++) {
            let serie = [];
            let startIndex = i * 14; 
            for (let j = 0; j < 14; j++) {
                // Gebruik modulo om rond te gaan als de lijst kleiner is dan 140 woorden
                let wordIndex = (startIndex + j) % vocab.length;
                serie.push({ nl: vocab[wordIndex].nl, fr: vocab[wordIndex].fr });
            }
            toutesLesSeries.push(serie);
        }
    }
    renderGrille();
}

function renderGrille() {
    const grille = document.getElementById('set-grid');
    grille.innerHTML = '';
    toutesLesSeries.forEach((serie, i) => {
        const carte = document.createElement('div');
        carte.className = 'set-card';
        carte.innerHTML = `
            <h3>S√©rie ${i+1}</h3>
            <p style="color:#888; font-size:14px;">14 mots (Fixes)</p>
            <button class="btn" onclick="demarrerSerie(${i})">üöÄ Commencer</button>
            <button class="btn btn-secondary" onclick="ouvrirEdition(${i})">üìù Voir/Modifier</button>
        `;
        grille.appendChild(carte);
    });
}

function exporterData() {
    const numTheme = document.getElementById('theme-select').value;
    if(!numTheme) return alert("Choisissez un th√®me d'abord.");
    const data = localStorage.getItem('creafrench_thema_' + numTheme);
    if(!data) return alert("Pas de donn√©es modifi√©es √† exporter.");
    navigator.clipboard.writeText(data).then(() => alert("Code copi√© !"));
}

function importerData() {
    const numTheme = document.getElementById('theme-select').value;
    if(!numTheme) return alert("Choisissez un th√®me d'abord.");
    const code = prompt("Collez le code ici :");
    if(code) {
        localStorage.setItem('creafrench_thema_' + numTheme, code);
        genererSeries(numTheme);
    }
}

function abrirEdition(idx) {
    indexSerieActuelle = idx;
    document.getElementById('edit-title').innerText = `Modifier S√©rie ${idx + 1}`;
    const corpsTableau = document.getElementById('edit-body');
    corpsTableau.innerHTML = '';
    toutesLesSeries[idx].forEach((mot) => ajouterLigneTableau(mot.nl, mot.fr));
    document.getElementById('edit-screen').style.display = 'flex';
}

function ajouterLigneTableau(nl = "", fr = "") {
    const corpsTableau = document.getElementById('edit-body');
    const ligne = document.createElement('tr');
    ligne.innerHTML = `
        <td><input type="text" class="edit-nl" value="${nl}"></td>
        <td><input type="text" class="edit-fr" value="${fr}"></td>
        <td><button onclick="this.parentElement.parentElement.remove()" style="color:red; background:none; border:none; cursor:pointer;">‚úñ</button></td>
    `;
    corpsTableau.appendChild(ligne);
}

function ajouterLigne() { ajouterLigneTableau(); }

function sauvegarderEtDemarrer() {
    const nouveauxMots = [];
    const entreesNl = document.querySelectorAll('.edit-nl');
    const entreesFr = document.querySelectorAll('.edit-fr');
    entreesNl.forEach((entree, i) => {
        if(entree.value.trim() !== "") {
            nouveauxMots.push({ nl: entree.value, fr: entreesFr[i].value });
        }
    });
    toutesLesSeries[indexSerieActuelle] = nouveauxMots;
    const numTheme = document.getElementById('theme-select').value;
    localStorage.setItem('creafrench_thema_' + numTheme, JSON.stringify(toutesLesSeries));
    fermerEdition();
    renderGrille();
    demarrerSerie(indexSerieActuelle);
}

function fermerEdition() { document.getElementById('edit-screen').style.display = 'none'; }

function demarrerSerie(idx) {
    indexSerieActuelle = idx; indexMotActuel = 0; estEnPause = false;
    document.getElementById('container').style.display = 'none';
    document.getElementById('exercise').style.display = 'flex';
    document.getElementById('timer-container').style.display = 'block'; 
    document.getElementById('exercise-buttons').innerHTML = `
        <button class="btn" style="width:140px; background:#555;" id="pause-btn" onclick="basculerPause()">Pause</button>
        <button class="btn" style="width:140px; background:var(--danger);" onclick="location.reload()">Arr√™ter</button>
    `;
    motSuivant();
}

function motSuivant() {
    const serie = toutesLesSeries[indexSerieActuelle];
    if (indexMotActuel >= serie.length) { 
        wachtenOpDocent(); 
        return; 
    }
    tempsRestant = 8; 
    document.getElementById('word-display').innerText = serie[indexMotActuel].nl;
    document.getElementById('info-header').innerText = `S√©rie ${indexSerieActuelle+1} ‚Äî Mot ${indexMotActuel+1}/${serie.length}`;
    if (intervalle) clearInterval(intervalle);
    intervalle = setInterval(() => {
        if (!estEnPause) {
            tempsRestant--; 
            document.getElementById('timer-bar').style.width = (tempsRestant / 8 * 100) + '%';
            if (tempsRestant <= 0) { indexMotActuel++; motSuivant(); }
        }
    }, 1000);
}

function basculerPause() {
    estEnPause = !estEnPause;
    document.getElementById('pause-btn').innerText = estEnPause ? "Reprendre" : "Pause";
}

function wachtenOpDocent() {
    clearInterval(intervalle);
    document.getElementById('timer-container').style.display = 'none'; 
    document.getElementById('word-display').innerHTML = "S√©rie termin√©e !";
    document.getElementById('word-display').style.fontSize = "40px";
    const btnContainer = document.getElementById('exercise-buttons');
    btnContainer.innerHTML = `
        <button class="btn" style="width: auto; padding: 15px 40px; font-size: 22px; background: var(--success);" onclick="afficherResultats()">
            üëÄ Afficher les Solutions
        </button>
    `;
}

function afficherResultats() {
    clearInterval(intervalle);
    document.getElementById('exercise').style.display = 'none';
    document.getElementById('result').style.display = 'flex';
    document.getElementById('res-body').innerHTML = toutesLesSeries[indexSerieActuelle].map(m => `
        <tr><td>${m.nl}</td><td style="color:var(--primary); font-weight:bold;">${m.fr}</td></tr>
    `).join('');
}
</script>
</body>
</html>
